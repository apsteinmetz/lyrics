---
title: "What Do the Ramones Want?"
output: html_notebook
---

```{r}
#devtools::install_github("dmi3kno/polite")
library(tidyverse)
library(tidytext)
library(rvest)
library(polite)
```

Get names of all Ramones songs from azlyrics.com.  Use the `polite` package so we obey the robots.txt instructions at the site.
```{r}
# be polite. get scraping parameters.
base_url <- "https://azlyrics.com"
 song_list_raw <- polite::bow("https://azlyrics.com/r/ramones.html") %>% 
   polite::scrape() %>%
   rvest::html_nodes("#listAlbum a")

song_list <- song_list_raw %>% 
  rvest::html_attr("href") %>% 
  tibble::enframe(name = NULL,value = "lyric_url") %>% 
  dplyr::mutate(song_name = html_text(song_list_raw)) %>% 
  mutate(lyric_url=str_replace(lyric_url,"..",base_url))
```

Now get all the lyrics
```{r}
#make a function to get lyrics

get_lyric <- function(lyric_url){
  lyric <- bow(lyric_url) %>% 
    scrape() %>% 
    #    /html/body/div[4]/div/div[2]/div[5]
    # body > div.container.main-page > div > div.col-xs-12.col-lg-8.text-center > div:nth-child(8)
    html_nodes("div") %>%
    #not happy with this.  relies on the lyrics always being the 22nd `<div>` tag on the page.
    .[22] %>% 
    html_text() %>%
    str_remove_all("\r") %>% 
    str_replace_all("\n"," ") %>% 
    str_trim()
  return(lyric)
}

all_lyrics <- NULL
for (lyric_url in song_list$lyric_url){
  get_lyric(lyric_url)
  print(lyric)
  all_lyrics <- c(all_lyrics,lyric)
  
}
```

